{% load static %}
<div class="card col-12">
  <div class="card-header mb-0 mt-2 ml-4">
      <div class="card-title f-bold">
          Taxonomy selector
      </div>
      <ul class="nav nav-tabs ml-5" id="ts-tab" role="tablist"
          style="border-bottom:none">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="ts-overview-tab" data-toggle="tab"
                data-target="#ts-overview" type="button" role="tab" 
                aria-controls="ts-overview" aria-selected="true">
                Overview
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="ts-sunburst-tab" data-toggle="tab"
                data-target="#ts-sunburst" type="button" role="tab" 
                aria-controls="ts-sunburst" aria-selected="false">
                Sunburst
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="ts-basket-tab" data-toggle="tab"
                data-target="#ts-basket" type="button" role="tab" 
                aria-controls="ts-basket" aria-selected="false">
                Genome basket
            </button>
          </li>
      </ul>
  </div>

  <div class="card-body tab-content" id="ts-tab-content">
      <div class="tab-pane fade show active"
          id="ts-overview" role="tabpanel" aria-labelledby="ts-overview-tab">
          <div class="d-flex justify-content-center">
              <img src="{% static "gecoviz/img/taxselector.png" %}"
                   alt="Genomic context graph outline"
                   class="mt-2"
                   style="width:95%; height:auto; max-width:80rem"/>
          </div>
      </div>
      <div class="tab-pane fade" id="ts-sunburst" 
          role="tabpanel" aria-labelledby="ts-sunburst-tab">
          <div style="float: left">
              <img src="{% static "gecoviz/img/sunburst.png" %}"
                   alt="Sunburst taxonomy selector"
                   class="my-2"
                   style="width:95%; height:auto; max-width:65rem"/>
          </div>
          <div class="m-4">
              An interactive, dynamic, zoomable sunburst acts as the
              taxonomy selector in <i class="f-bold color-indigo">GeCoViz</i>. 
              <br><br>
              Thanks to its hierarchical structure, a sunburst seems an
              intuitive way to display a phylogeny, in this case, of the
              genomes in which we find a "hit" (gene associated) to a
              functional term or orthologous group of interest.
              <br><br>
              The sunburst selector is highly interactive and four
              different items comprise it:
              <br><br>
              <b class="color-indigo">Search bar:</b>
              allows to perform searches on the
              sunburst. While typing a taxa of interest, a list of
              suggestions drops down. Choose the one that fits the criteria
              and the sunburst will dynamically zoom into the selected
              taxa, highlight it and its submenu will appear (from which
              you can perform a number of actions, see below).
              <br><br>
              <b class="color-indigo">Sunburst:</b> the graph itself is interactive. Hover over
              a tile and the breadcrumb will update to display the whole
              taxonomy of the taxa represented by that tile. Click on the
              tile to toggle the submenu associated with it.
              <br><br>
              <b class="color-indigo">Submenu:</b> toggled on a particular taxa. It allows to
              zoom into such taxa (dynamically modifying the sunburst) as
              well as to add genomes belonging to it. There are several
              ways to <b>add genomes to the genome basket</b>. We can
              choose one genome (at random) that belongs to such taxa, all
              of them (if it doesn't surpass the limit) or choose the
              so-called "representative genomes from X taxonomic levels".
              As an example to the last option, adding 
              <i>representative genomes from 7 genus</i> means adding
              one genome (at random) for each of the 7 genus that have
              matches under the selected taxa.
              <br><br>
              <b class="color-indigo">Breadcrumb:</b> located at the bottom of the sunburst. It
              dynamically portrays the full taxonomy of the taxa that has
              been selected or hovered on. Moreover, it remains fixed when
              we zoom in a particular taxa, which is particularly helpful
              as it allows the user to better orient themselves in the
              graph.
          </div>
      </div>
      <div class="tab-pane fade" id="ts-basket" 
          role="tabpanel" aria-labelledby="ts-basket-tab">
          <div style="float: left">
              <img src="{% static "gecoviz/img/basket.png" %}"
                   alt="Genome basket in taxonomy selector"
                   class="my-2"
                   style="width:95%; height:auto; max-width:50rem"/>
          </div>
          <div class="m-4">
              The genome basket shows a <b>summary of the selected genomes
              from different taxa</b>. These genomes can be added from the
              sunburst's submenu (see sunburst > submenu). A similar
              submenu can be toggled by clicking on the downwards arrow in
              any basket entry, allowing the user to modify the number of
              genomes that will be shown for that taxa. 
              <br><br>
              A <b class="color-indigo">maximum of 250 genomes</b>
              can be selected in total.
              This upper limit is set for user experience, to avoid
              excessive scrolling when visualizing the genomic context 
              (a global view is helpful when infering functional
              conservation) as well as to mantain high browser performance
              and quick response time to user interaction.
              <br><br>
              Once we have finished selecting the desired genomes, we can
              click on the button on the bottom to visualize their genomic
              context.

              <br><br>
              <p class="f-bold color-indigo">
                PLEASE CLEAR THE GENOME BASKET PRIOR TO STARTING A NEW
                SELECTION
              </p>
              <p>Selections are exclusive. If the newer selection contains
              genomes from the previous and the latter is removed 
              after performing the former,
              these genomes will not be included in the visualization.</p>

          </div>
      </div>
  </div>
</div>
